<?php 
$role = $this->user_entity->groups[0]['ROLENAME'];
?>
<div class="row">
	<div class="col">
		<h1>Timesheet</h1>
	</div>
	<div class="col">
		<?php $week_form->setAttribute('action', $this->url('timecard/default', ['action' => 'filter'])); ?>
		<?php $week_form->prepare(); ?>
		<?php echo $this->form()->openTag($week_form); ?>
		<div class="form-group">
			<?php echo $this->formRow($this->week_form->get('EMP_UUID')); ?>
			<?php echo $this->formRow($this->week_form->get('WORK_WEEK')); ?>
			<?php echo $this->formRow($this->week_form->get('SECURITY')); ?>
			<?php echo $this->formRow($this->week_form->get('SUBMIT')); ?>
		</div>
		<?php echo $this->form()->closeTag($week_form); ?>
	</div>
</div>		

<div class="row">
	<div class="col">
		<table class="table">
			<thead class="thead-dark">
				<tr>
					<th scope="col">Pay&nbsp;Code</th>
					<th scope="col">Monday</th>
					<th scope="col">Tuesday</th>
					<th scope="col">Wednesday</th>
					<th scope="col">Thursday</th>
					<th scope="col">Friday</th>
					<th scope="col">Saturday</th>
					<th scope="col">Sunday</th>
					<th scope="col">Days</th>
					<th scope="col">Total<th>
				</tr>
			</thead>
			<tbody>
			<?php foreach ($this->timesheet_forms as $form) : ?>
				<?php echo $this->partial('timecard/partials/weeklytimesheet.phtml',['form' => $form, 'role' => $role]); ?>
			<?php endforeach; ?>
			</tbody>
			<tfoot>
				<tr>
					<?php $this->timecard_add_form->setAttribute('action', $this->url('timecard/default', ['action' => 'addPayCode']));?>
					<?php $this->timecard_add_form->prepare(); ?>
					<?php echo $this->form()->openTag($this->timecard_add_form); ?>
						<?php echo $this->formRow($this->timecard_add_form->get('TIMECARD_UUID')); ?>
						<?php echo $this->formRow($this->timecard_add_form->get('SECURITY')); ?>
					<td colspan="2">
						Add New Pay Code:
					</td>
					<td colspan="6">
						<?php echo $this->formSelect($this->timecard_add_form->get('PAY_UUID')); ?>
					</td>
					<td>
						<?php echo $this->formRow($this->timecard_add_form->get('SUBMIT')); ?>
					</td>
					<?php echo $this->form()->closeTag($this->timecard_add_form); ?>
				</tr>
			</tfoot>
		</table>
	</div>
	<div class="col">
		<?php 
		echo $this->partial('timecard/partials/sign.phtml', [
		    'title' => 'Signatures',
		    'data' => $this->timecard_signatures,
		    'primary_key' => 'UUID',
		    'route' => 'timecards/signatures',
		    'timecard_uuid' => $this->timecard_uuid,
		    'role' => $role,
		    'params' => [],
		]); 
		?>
	</div>
</div>
<?php echo $this->annotations()->setAnnotations($this->annotations)->render(); ?>
